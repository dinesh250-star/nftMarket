{"ast":null,"code":"import _regeneratorRuntime from \"C:/a/nft-marketplace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/a/nft-marketplace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/a/nft-marketplace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\a\\\\nft-marketplace\\\\src\\\\store\\\\Web3Provider.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useReducer } from 'react';\nimport Web3Context from './web3-context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar defaultWeb3State = {\n  account: null,\n  networkId: null\n};\n\nvar web3Reducer = function web3Reducer(state, action) {\n  if (action.type === 'ACCOUNT') {\n    return {\n      account: action.account,\n      networkId: state.networkId\n    };\n  }\n\n  if (action.type === 'NETWORKID') {\n    return {\n      account: state.account,\n      networkId: action.networkId\n    };\n  }\n\n  return defaultWeb3State;\n};\n\nvar Web3Provider = function Web3Provider(props) {\n  _s();\n\n  var _useReducer = useReducer(web3Reducer, defaultWeb3State),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      web3State = _useReducer2[0],\n      dispatchWeb3Action = _useReducer2[1];\n\n  var loadAccountHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(web3) {\n      var accounts, account;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return web3.eth.getAccounts();\n\n            case 2:\n              accounts = _context.sent;\n              account = accounts[0];\n              dispatchWeb3Action({\n                type: 'ACCOUNT',\n                account: account\n              });\n              return _context.abrupt(\"return\", account);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function loadAccountHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var loadNetworkIdHandler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(web3) {\n      var networkId;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return web3.eth.net.getId();\n\n            case 2:\n              networkId = _context2.sent;\n              dispatchWeb3Action({\n                type: 'NETWORKID',\n                networkId: networkId\n              });\n              return _context2.abrupt(\"return\", networkId);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function loadNetworkIdHandler(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var web3Context = {\n    account: web3State.account,\n    networkId: web3State.networkId,\n    loadAccount: loadAccountHandler,\n    loadNetworkId: loadNetworkIdHandler\n  };\n  return /*#__PURE__*/_jsxDEV(Web3Context.Provider, {\n    value: web3Context,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Web3Provider, \"C3AzG0u+y2G3aAnVzYqJS6tWeFM=\");\n\n_c = Web3Provider;\nexport default Web3Provider;\n\nvar _c;\n\n$RefreshReg$(_c, \"Web3Provider\");","map":{"version":3,"sources":["C:/a/nft-marketplace/src/store/Web3Provider.js"],"names":["useReducer","Web3Context","defaultWeb3State","account","networkId","web3Reducer","state","action","type","Web3Provider","props","web3State","dispatchWeb3Action","loadAccountHandler","web3","eth","getAccounts","accounts","loadNetworkIdHandler","net","getId","web3Context","loadAccount","loadNetworkId","children"],"mappings":";;;;;;;;AAAA,SAASA,UAAT,QAA2B,OAA3B;AAEA,OAAOC,WAAP,MAAwB,gBAAxB;;AAEA,IAAMC,gBAAgB,GAAG;AACvBC,EAAAA,OAAO,EAAE,IADc;AAEvBC,EAAAA,SAAS,EAAE;AAFY,CAAzB;;AAKA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAQC,MAAR,EAAmB;AACrC,MAAGA,MAAM,CAACC,IAAP,KAAgB,SAAnB,EAA8B;AAC5B,WAAO;AACLL,MAAAA,OAAO,EAAEI,MAAM,CAACJ,OADX;AAELC,MAAAA,SAAS,EAAEE,KAAK,CAACF;AAFZ,KAAP;AAID;;AAED,MAAGG,MAAM,CAACC,IAAP,KAAgB,WAAnB,EAAgC;AAC9B,WAAO;AACLL,MAAAA,OAAO,EAAEG,KAAK,CAACH,OADV;AAELC,MAAAA,SAAS,EAAEG,MAAM,CAACH;AAFb,KAAP;AAID;;AAED,SAAOF,gBAAP;AACD,CAhBD;;AAkBA,IAAMO,YAAY,GAAG,SAAfA,YAAe,CAAAC,KAAK,EAAI;AAAA;;AAC5B,oBAAwCV,UAAU,CAACK,WAAD,EAAcH,gBAAd,CAAlD;AAAA;AAAA,MAAOS,SAAP;AAAA,MAAkBC,kBAAlB;;AAEA,MAAMC,kBAAkB;AAAA,wEAAG,iBAAMC,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACFA,IAAI,CAACC,GAAL,CAASC,WAAT,EADE;;AAAA;AACnBC,cAAAA,QADmB;AAEnBd,cAAAA,OAFmB,GAETc,QAAQ,CAAC,CAAD,CAFC;AAGzBL,cAAAA,kBAAkB,CAAC;AAACJ,gBAAAA,IAAI,EAAE,SAAP;AAAkBL,gBAAAA,OAAO,EAAEA;AAA3B,eAAD,CAAlB;AAHyB,+CAIlBA,OAJkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAlBU,kBAAkB;AAAA;AAAA;AAAA,KAAxB;;AAOA,MAAMK,oBAAoB;AAAA,yEAAG,kBAAMJ,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACHA,IAAI,CAACC,GAAL,CAASI,GAAT,CAAaC,KAAb,EADG;;AAAA;AACrBhB,cAAAA,SADqB;AAE3BQ,cAAAA,kBAAkB,CAAC;AAACJ,gBAAAA,IAAI,EAAE,WAAP;AAAoBJ,gBAAAA,SAAS,EAAEA;AAA/B,eAAD,CAAlB;AAF2B,gDAGpBA,SAHoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAApBc,oBAAoB;AAAA;AAAA;AAAA,KAA1B;;AAMA,MAAMG,WAAW,GAAG;AAClBlB,IAAAA,OAAO,EAACQ,SAAS,CAACR,OADA;AAElBC,IAAAA,SAAS,EAAEO,SAAS,CAACP,SAFH;AAGlBkB,IAAAA,WAAW,EAAET,kBAHK;AAIlBU,IAAAA,aAAa,EAAEL;AAJG,GAApB;AAOA,sBACE,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEG,WAA7B;AAAA,cACGX,KAAK,CAACc;AADT;AAAA;AAAA;AAAA;AAAA,WADF;AAKD,CA5BD;;GAAMf,Y;;KAAAA,Y;AA8BN,eAAeA,YAAf","sourcesContent":["import { useReducer } from 'react';\r\n\r\nimport Web3Context from './web3-context';\r\n\r\nconst defaultWeb3State = {\r\n  account: null,\r\n  networkId: null\r\n};\r\n\r\nconst web3Reducer = (state, action) => {\r\n  if(action.type === 'ACCOUNT') {\r\n    return {\r\n      account: action.account,\r\n      networkId: state.networkId\r\n    };\r\n  } \r\n  \r\n  if(action.type === 'NETWORKID') {\r\n    return {\r\n      account: state.account,\r\n      networkId: action.networkId\r\n    };\r\n  }\r\n  \r\n  return defaultWeb3State;\r\n};\r\n\r\nconst Web3Provider = props => {\r\n  const [web3State, dispatchWeb3Action] = useReducer(web3Reducer, defaultWeb3State);\r\n  \r\n  const loadAccountHandler = async(web3) => {\r\n    const accounts = await web3.eth.getAccounts();\r\n    const account = accounts[0];\r\n    dispatchWeb3Action({type: 'ACCOUNT', account: account});\r\n    return account;\r\n  };\r\n\r\n  const loadNetworkIdHandler = async(web3) => {\r\n    const networkId = await web3.eth.net.getId();\r\n    dispatchWeb3Action({type: 'NETWORKID', networkId: networkId});\r\n    return networkId;   \r\n  };\r\n  \r\n  const web3Context = {\r\n    account:web3State.account,\r\n    networkId: web3State.networkId,\r\n    loadAccount: loadAccountHandler,\r\n    loadNetworkId: loadNetworkIdHandler\r\n  };\r\n  \r\n  return (\r\n    <Web3Context.Provider value={web3Context}>\r\n      {props.children}\r\n    </Web3Context.Provider>\r\n  );\r\n};\r\n\r\nexport default Web3Provider;"]},"metadata":{},"sourceType":"module"}